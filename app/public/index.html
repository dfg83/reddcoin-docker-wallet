<html lang="en" ng-app="WalletApp">

<head>
	<title>reddcoin wallet</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="/assets/bootstrap.min.css" />
	<link rel="stylesheet" href="/assets/fontawesome/css/all.min.css" />
	<link rel="stylesheet" href="/ext/noty.css" />
	<link rel="stylesheet" href="/ext/themes/light.css" />
	<link rel="stylesheet" href="/ext/sweetalert2.min.css" />
	<link rel="stylesheet" href="/assets/app.css" />

</head>

<body ng-controller="WalletController">

	<!-- As a link -->
	<nav class="navbar navbar-light bg-light mb-3">
		<a class="navbar-brand" href="/">reddcoin wallet</a>
		<span class="navbar-text number-{{state=='online'?'green':'red'}}">
			<i class="fas fa-wifi"></i> {{state}}
		</span>
		<span class="navbar-text">
			<button id="reloadButton" type="button" class="btn btn-secondary btn-sm" ng-click="load()">
				<i class="fas fa-redo-alt"></i>
			</button>
		</span>
	</nav>

	<div class="container">

		<div ng-switch="blockchain.indexing">
			<div ng-switch-when="true">
				<h4>Indexing</h4>
				<div class="blockchain mb-3">
					<div class="progress">
						<div class="progress-bar" role="progressbar" style="width: {{Math.round((blockchain.verificationprogress * 10000))/100}}%">{{Math.round((blockchain.verificationprogress * 10000))/100}} %</div>
					</div>
				</div>
			</div>
		</div>

		<h4>Accounts</h4>
		<div class="account balance">
			<div class="row">
				<div class="col-5">
					<span>Balance</span>
				</div>
				<div class="col-7 text-right">
					{{balance}}
				</div>
			</div>
		</div>
		<div class="account" ng-repeat="(key, value) in accounts" ng-if="value>0">
			<div class="row">
				<div class="col-5">
					<span style="font-style: {{key?'normal':'italic'}}">{{key || "Unnamed"}}</span>
				</div>
				<div class="col-7 text-right">
					{{value}}
				</div>
				<div class="col-6 mt-2">
					<!--<button type="button" class="btn btn-secondary btn-sm">Edit Name</button>-->
				</div>
				<div class="col-6 mt-2 text-right">
					<!--<button type="button" class="btn btn-secondary btn-sm">Move</button>-->
					<!--<button type="button" class="btn btn-success btn-sm">Receive</button>-->
					<!--<button type="button" class="btn btn-primary btn-sm">Send</button>-->
				</div>
			</div>
		</div>

		<h4>Staking</h4>
		<div class="account">
			<div class="row font-weight-bold">
				<div class="col-7">
					<span>Staking</span>
				</div>
				<div class="col-5 text-right">
					{{staking.staking ? "yes" : "no"}}
				</div>
			</div>
			<div ng-switch="staking.staking">

				<div ng-switch-when="true">
					<div class="row">
						<div class="col-7">
							<span>average weight</span>
						</div>
						<div class="col-5 text-right">
							{{staking.averageweight}}
						</div>
						<div class="col-7">
							<span>total weight</span>
						</div>
						<div class="col-5 text-right">
							{{staking.totalweight}}
						</div>
						<div class="col-7">
							<span>net stake weight</span>
						</div>
						<div class="col-5 text-right">
							{{staking.netstakeweight}}
						</div>
						<div class="col-7">
							<span>expected time</span>
						</div>
						<div class="col-5 text-right">
							{{moment().add(staking.expectedtime * 1000).fromNow()}}
						</div>
					</div>
				</div>

				<div ng-switch-when="false">
					<div class="row">
						<div class="col-12">
							<button type="button" class="btn btn-primary btn-sm w-100" ng-click="enableStaking()">enable staking</button>
						</div>
					</div>
				</div>

			</div>
		</div>

		<h4>Transactions</h4>
		<table class="table table-striped">
			<thead>
				<tr>
					<th scope="col">Transaction</th>
					<th scope="col">Amount</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="transaction in transactions | orderBy:'time':true">
					<td>
						{{address}} <span class="badge badge-primary">{{transaction.category}}</span>
						<br />
						<small title="{{moment(transaction.time * 1000).format('MMMM Do YYYY, h:mm:ss a')}}">{{moment(transaction.time * 1000).fromNow()}}</small>
					</td>
					<td>{{transaction.amount>0?"+":"-"}}{{transaction.amount}}</td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="3">
						<button type="button" class="btn btn-primary" ng-click="fillTransactions()">load more</button>
					</td>
				</tr>
			</tfoot>
		</table>

		<div class="row">
			<div class="col-12 text-monospace text-center">
				last updated {{lastUpdated.fromNow()}}
			</div>
		</div>

	</div>

	<!-- Angular Material requires Angular.js Libraries -->
	<script src="/assets/angular.min.js"></script>

	<!-- Angular Material Library -->
	<script src="/assets/jquery-3.3.1.min.js"></script>
	<script src="/assets/moment.js"></script>
	<script src="/ext/noty.min.js"></script>
	<script src="/ext/sweetalert2.all.min.js"></script>
	<script src="/assets/app.js"></script>

</body>

</html>